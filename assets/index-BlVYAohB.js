(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(e){if(e.ep)return;e.ep=!0;const t=r(e);fetch(e.href,t)}})();function c(o=!1){document.querySelectorAll(".favorite-btn").forEach(r=>{const s=String(r.dataset.id);let e=new Set(JSON.parse(localStorage.getItem("favorites")||"[]").map(String));e.has(s)?(r.classList.add("active"),r.textContent="♥"):(r.classList.remove("active"),r.textContent="♡"),r.addEventListener("click",t=>{if(t.preventDefault(),t.stopPropagation(),e=new Set(JSON.parse(localStorage.getItem("favorites")||"[]").map(String)),e.has(s)){if(e.delete(s),r.classList.remove("active"),r.textContent="♡",o){const i=r.closest(".card");i&&i.remove()}}else e.add(s),r.classList.add("active"),r.textContent="♥";localStorage.setItem("favorites",JSON.stringify([...e]))})})}function f(o){return`/assets/images/onsen_${o}.jpg`}function l(o){const n=document.getElementById("recommended-slider");n.innerHTML="",[...o].sort(()=>.5-Math.random()).slice(0,5).forEach(e=>{const t=document.createElement("div");t.className="slider-card",t.innerHTML=`
      <a href = "onsen.html?id=${e.id}">
        <img src="${f(e.romaji)}" alt="${e.name}">
        <h4>${e.name}</h4>
      </a> 
      <button class="favorite-btn" data-id="${e.id}">♡</button>
    `,n.appendChild(t)}),c()}let d=[];fetch("/onsen.json").then(o=>o.json()).then(o=>{d=o,l(o)}).catch(o=>{console.error("温泉データの取得に失敗しました:",o)});const a=document.getElementById("showFavoritesBtn");a&&a.addEventListener("click",()=>{const o=JSON.parse(localStorage.getItem("favorites")||"[]"),n=new Set(o.map(String)),r=d.filter(s=>n.has(String(s.id)));l(r),c()});
